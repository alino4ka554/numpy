import numpy as np
import matplotlib.pyplot as plt

def f(x):
    return -0.5*x + 1.5

def generate_samples(n):
    samples = []
    while len(samples) < n:
        r1 = np.random.uniform()
        x = 2*r1 + 1
        r2 = np.random.uniform()
        if r2 <= f(x):
            samples.append(x)
    return samples

def plot_histogram(samples, num_bins):
    plt.hist(samples, bins=num_bins)
    plt.title('Histogram of Samples')
    plt.xlabel('Value')
    plt.ylabel('Frequency')
    plt.show()

def calculate_statistics(samples):
    mean = np.mean(samples)
    mode = max(set(samples), key=samples.count)
    median = np.median(samples)
    variance = np.var(samples, ddof=1)
    print(f'Mean: {mean:.2f}')
    print(f'Mode: {mode:.2f}')
    print(f'Median: {median:.2f}')
    print(f'Variance: {variance:.2f}')

# Generate 1000 samples
samples = generate_samples(1000)

# Plot histogram with 20 bins
plot_histogram(samples, 20)

# Calculate statistics
calculate_statistics(samples)
